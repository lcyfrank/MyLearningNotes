## 计算机网络基本概念

> 因特网是一个世界级的计算机网络，是一个互联了遍及全世界的数以亿计的计算机设备的网络

### 主机和端系统

连接到互联网的设备均称为主机和端系统，包括了桌面计算机、服务器和移动计算机。主机（端系统）有时又被划分为两类： **客户** 和 **服务器** 。还有一种拥有大量服务器的称为 **数据中心** 。因为主机（端系统）均位于因特网的边缘，所以又称为 **网络边缘** 。

### 通信链路

通信链路起到链接作用，可以是各种不同类型的物理媒体组成的，也可以是各种无形的媒介。

### 分组交换机

分组交换机从它的一条入通信链路接收到达的分组，并从它的一条出通信链路转发该分组。市面上流行着两种最著名的类型的分组交换机：

* 路由器：多用于 [核心](#网络核心) 中
* 链路层交换机：多用于 [接入网](#接入网)

### 路径

从发送端到接收端系统所经历的一系列通信链路和分组交换机称为通过该网络的路径。

### 协议

控制因特网中信息的收发，一个协议定义了在两个或多个通信实体之间交换的报文格式和次序，以及报文发送和接收一条报文或其他事件所采取的动作。不同的协议用于完成不同的通信任务。掌握计算机网络领域知识的过程就是理解网络协议的构成、原理和工作方式的过程。

### 网络API

网络 API 由与因特网相连的端系统提供，该 API 规定了运行在一个端系统上的软件请求因特网基础设施向运行在另一个端系统上的特定目的地软件交付数据的方式。因特网向应用程序提供了多种服务，可以通过网络 API 选择不同的服务来使用。

### 接入网

接入网是指将端系统连接到其边缘路由器的 **物理链路** ，边缘路由器是指端系统到任何其他远程端系统的路径上的第一台路由器。

### 网络接入方式

* DSL（数字用户线）: 从提供本地电话接入的本地电话公司处获得 `DSL` 因特网接入，与电话信号共享使用现有电话线，将数据发送给本地中心局，并在本地中心局将数据和电话信号分隔开。

* 电缆：利用有线电视公司现有的有线电视基础设施，从有线电视公司获得电缆因特网接入。

* 光纤到户：从本地中心局向家庭连接一条光纤路径

* 以太网：当前公司、大学和家庭网络中最为流行的接入技术。以太网用户使用双绞铜线与一台以太网交换机相连，以太网交换机或这样相连的交换机网络，则再与更大的因特网相连。

* WiFi：无线用户从/到一个接入点发送/接收分组，该接入点与企业网连接（有线以太网），该企业网再与有线因特网连接。

* 广域无线接入：蜂窝数据网络

### 网络核心

网络核心即由互联因特网端系统的分组交换机和链路构成的网状网络。

#### 分组交换

从源向目的发送一个报文的时候，源将长报文划分为较小的数据块，称之为分组。在源和目的之间，每个分组都通过通信链路和分组交换机传送。

* 存储转发机制：

每一个交换机在能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组，这时就会产生 **存储转发时延** 。

* 排队时延和分组丢失：

每个分组交换机有多条链路相连，对于每条链路，该分组交换机具有一个输出缓存。它用于存储路由器准备发往那条链路的分组。如果到达的分组需要传输到某条链路，但发现该链路正忙于传输其他分组，该到达分组必须在输出缓存中等待。这时就会产生 **排队时延** 。

而因为缓存空间的大小是有限的，一个到达的分组可能发现该缓存已经被其他等待传输的分组完全充满了，在此情况下，将会出现 **分组丢失** 的情况，新到达的分组或者已经排队的分组将会有一个被丢弃。

* 转发表和路由选择协议：

在因特网中，每个端系统具有一个 `IP` 地址，当源主机要向目的端系统发送一个分组时，源在该分组的首部包含了目的 `IP` 地址。当一个分组到达网络中的路由器时，路由器检查该分组的目的地址的一部分，并向一台相邻路由器转发该分组。每台路由器通过内部维持一个 **转发表** 来将目的地址映射成输出链路。

#### 电路交换

在发送放发送信息之前，网络首先要在发送方和接收方之间建立一条连接。这是一条名副其实的连接，由沿着发送方和接收方之间路径上的交换机为其维护连接状态。

电路交换中，需要对一条物理链路进行复用，可以分为以下两种：

* 频分复用：以不同的频率来共享一条链路

* 时分复用：时间被划分为固定区间的帧，网络跨越一条物理链路建立一条连接时，会在每个帧为该连接指定一个时隙，这些时隙由该连接单独使用。

### 分组交换中的时延

* 处理时延

* 排队时延

* 传输时延

* 传播时延

### 计算机网络中的吞吐量

吞吐量实际上就是传输数据的速率（bps）。吞吐量分为瞬时吞吐量和平均吞吐量，瞬时吞吐量即某一瞬间接收/发送数据的速率，而平均吞吐量则为某一平均时间段传输数据的速率。

在网络中有多条链路的时候，且每一段链路的传输速率分别为 `R1`， `R2`， `R3` ... 时，该网络传输的吞吐量为 `min{R1, R2, R3, ..., RN}` 。

## 应用层

应用层是计算机网络存在的理由。现在有两种主流的网络应用程序体系结构： **客户-服务器体系结构** 和 **对等（P2P）体系结构** 。

在客户-服务器体系结构中，有一个总是打开的主机称为服务器，它服务于来自许多其他称为客户的主机的请求。客户相互之间不直接通信，服务器具有固定的、周知的地址。

在 P2P 体系结构中，应用程序在间断连接的主机对之间使用直接通信，这些主机对被称为 **对等方** 。

所有进行通信的，实际上是 **进程** ，网络应用程序则由成对的进程组成，这些进程通过网络相互发送报文。

在网络中，进程通过一个称为 **套接字** 的软件接口向网络发送报文和从网络接收报文。套接字实际上是同一台主机内的应用层与运输层之间的接口，开发者可以通过控制套接字在应用层这一端的任何行为，但是没有办法控制在运输层的一端，最多只能进行选择运输层协议以及设定运输层参数等。

应用层协议定义了：

* 交换的报文类型，例如请求报文和响应报文
* 各种报文类型的语法，如报文中的各个字段及这些字段是如何描述的
* 字段的语义，即这些字段中包含的信息的含义
* 一个进程何时以及如何发送报文，对报文进行响应的规则

### HTTP 协议

HTTP 由两个程序实现，一个客户程序和一个服务器程序，通过交换 HTTP 报文进行会话。每一个 HTTP 所请求的 Web 页面都是由多个对象组成的，一个对象只是一个文件，诸如一个 HTML 文件、一个 JPEG 图片等。

HTTP 使用 TCP 作为它的支撑运输协议，HTTP 客户端首先发起一个与服务器的 TCP 连接。一旦连接建立，该浏览器和服务器进程就可以通过套接字接口访问 TCP。

HTTP 是一个无状态协议，即 HTTP 服务器并不保存关于客户的任何信息。

HTTP 分为非持续连接和持续连接：

* 非持续连接：即每请求一个对象，需要客户端向服务器端建立一个 TCP 连接，当服务器发送一个对象之后，关闭该 TCP 连接
* 持续连接：多个对象可以在同一个 TCP 连接中请求完成，甚至同一台服务器上的多个 Web 页面也能在单个持续连接的 TCP 上进行

#### HTTP 请求报文

报文采用普通 ASC II 文本书写，分别分为 **请求行** 、 **首部行** 、 **实体体** 。请求行有三个字段：方法字段、URL 字段和 HTTP 版本字段。

#### HTTP 响应报文

报文分为三个部分，分别为 **初始状态行** 、 ****
